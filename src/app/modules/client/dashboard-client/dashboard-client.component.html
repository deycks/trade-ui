@if (isLoading) {
<!-- Loading -->
<app-loading></app-loading>
} @else {
@if (showEmptyState) {
<!-- Empty state -->
<div class="mx-auto w-full p-6">
    <div class="rounded-lg border border-dashed border-gray-200 bg-white p-8 text-center">
        <div class="mb-2 text-2xl font-semibold">
            {{ dataDashboard?.uiHints?.emptyState?.title }}
        </div>
        <div class="mb-6 text-sm text-gray-500">
            {{ dataDashboard?.uiHints?.emptyState?.message }}
        </div>
        <div class="flex justify-center">
            <button mat-flat-button color="primary" class="px-6 py-2">
                Contactar a mi ejecutivo
            </button>
        </div>
    </div>
</div>
} @else {
<!-- Dashboard content -->
<div class="flex w-full flex-auto flex-col">
    <div class="mx-auto flex w-full flex-wrap p-6 md:p-8">
        <!-- Title and action buttons -->
        <div class="flex w-full items-center justify-between">
            <div>
                <div class="text-3xl font-semibold leading-8 tracking-tight">
                    Panel de inversión
                </div>
                <div class="text-secondary font-medium tracking-tight">
                    Consulta tu saldo, ganancias y evolución mensual
                </div>
            </div>

            <div class="ml-6 flex items-center">
                <button class="ml-3 hidden sm:inline-flex" mat-flat-button color="primary">
                    <mat-icon class="icon-size-5" svgIcon="heroicons_solid:arrow-up-tray"></mat-icon>
                    <span class="ml-2">Export</span>
                </button>

                <!-- Actions menu (visible on xs) -->
                <div class="sm:hidden">
                    <button [matMenuTriggerFor]="actionsMenu" mat-icon-button>
                        <mat-icon svgIcon="heroicons_outline:ellipsis-vertical"></mat-icon>
                    </button>
                    <mat-menu #actionsMenu="matMenu">
                        <button mat-menu-item>Export</button>
                        <button mat-menu-item>Settings</button>
                    </mat-menu>
                </div>
            </div>
        </div>

        <div class="mt-8 grid w-full grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Evolución de la cuenta -->
            <div
                class="bg-card dark flex flex-auto flex-col overflow-hidden rounded-2xl shadow sm:col-span-2 lg:col-span-3">
                <div class="m-6 mb-0 flex items-start justify-between">
                    <div class="truncate text-lg font-medium leading-6 tracking-tight">
                        Evolución de la cuenta
                    </div>
                    <div class="ml-2">
                        <button class="bg-hover h-6 min-h-6 rounded-full px-2" mat-button
                            [matMenuTriggerFor]="conversionMenu">
                            <span class="text-secondary text-sm font-medium">30 días</span>
                        </button>
                        <mat-menu #conversionMenu="matMenu">
                            <button mat-menu-item>30 días</button>
                            <button mat-menu-item>3 meses</button>
                            <button mat-menu-item>9 meses</button>
                        </mat-menu>
                    </div>
                </div>

                <div class="mx-6 mt-6 flex items-start">
                    <div class="grid grid-cols-1 gap-8 sm:grid-cols-3 sm:gap-12">
                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="text-secondary font-medium leading-5">
                                    Saldo actual
                                </div>
                                <mat-icon class="text-hint ml-1.5 icon-size-4"
                                    svgIcon="heroicons_mini:information-circle"
                                    [matTooltip]="'Score is calculated by using the historical ratio between Page Views and Visitors. Best score is 1000, worst score is 0.'"></mat-icon>
                            </div>
                            <div class="mt-2 flex items-start">
                                <div class="text-4xl font-bold leading-none tracking-tight">
                                    {{ dataDashboard?.kpis?.currentBalance | currency:'MXN' }}
                                </div>
                                <div class="ml-2 flex items-center">
                                    <mat-icon class="text-green-500 icon-size-5"
                                        svgIcon="heroicons_solid:arrow-up-circle"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-green-500">
                                        42.9%
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="text-secondary font-medium leading-5">
                                    Ganancias acumuladas
                                </div>
                                <mat-icon class="text-hint ml-1.5 icon-size-4"
                                    svgIcon="heroicons_mini:information-circle"
                                    [matTooltip]="'Average Ratio is the average ratio between Page Views and Visitors'"></mat-icon>
                            </div>
                            <div class="mt-2 flex items-start">
                                <div class="text-4xl font-bold leading-none tracking-tight">
                                    {{ dataDashboard?.kpis?.totalProfit | currency:'MXN' }}
                                </div>
                                <div class="ml-2 flex items-center">
                                    <mat-icon class="text-red-500 icon-size-5"
                                        svgIcon="heroicons_solid:arrow-down-circle"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-red-500">
                                        13.1%
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col">
                            <div class="flex items-center">
                                <div class="text-secondary font-medium leading-5">
                                    Ganancia del mes
                                </div>
                                <mat-icon class="text-hint ml-1.5 icon-size-4"
                                    svgIcon="heroicons_mini:information-circle"
                                    [matTooltip]="'Predicted Ratio is calculated by using historical ratio, current trends and your goal targets.'"></mat-icon>
                            </div>
                            <div class="mt-2 flex items-start">
                                <div class="text-4xl font-bold leading-none tracking-tight">
                                    {{ dataDashboard?.kpis?.profitThisMonth | currency:'MXN' }}
                                </div>
                                <div class="ml-2 flex items-center">
                                    <mat-icon class="text-green-500 icon-size-5"
                                        svgIcon="heroicons_solid:arrow-up-circle"></mat-icon>
                                    <div class="ml-1 text-md font-medium text-green-500">
                                        22.2%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-3 flex h-80 flex-auto flex-col">
                    <apx-chart class="h-full w-full flex-auto" [chart]="chartVisitorsVsPageViews.chart"
                        [colors]="chartVisitorsVsPageViews.colors" [dataLabels]="chartVisitorsVsPageViews.dataLabels"
                        [grid]="chartVisitorsVsPageViews.grid" [legend]="chartVisitorsVsPageViews.legend"
                        [series]="chartVisitorsVsPageViews.series" [stroke]="chartVisitorsVsPageViews.stroke"
                        [tooltip]="chartVisitorsVsPageViews.tooltip" [xaxis]="chartVisitorsVsPageViews.xaxis"
                        [yaxis]="chartVisitorsVsPageViews.yaxis"></apx-chart>
                </div>
            </div>

            <!-- Capital invertido -->
            <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl shadow sm:col-span-2 lg:col-span-1">
                <div class="m-6 mb-0 flex items-start justify-between">
                    <div class="truncate text-lg font-medium leading-6 tracking-tight">
                        Capital invertido
                    </div>
                    <div class="ml-2">
                        <button class="bg-hover h-6 min-h-6 rounded-full px-2" mat-button
                            [matMenuTriggerFor]="conversionMenu">
                            <span class="text-secondary text-sm font-medium">30 días</span>
                        </button>
                        <mat-menu #conversionMenu="matMenu">
                            <button mat-menu-item>30 días</button>
                            <button mat-menu-item>3 meses</button>
                            <button mat-menu-item>9 meses</button>
                        </mat-menu>
                    </div>
                </div>

                <div class="mx-6 mt-3 flex flex-col lg:flex-row lg:items-center">
                    <div class="text-7xl font-bold leading-tight tracking-tighter">
                        {{ dataDashboard?.kpis?.investedCapital | currency:'MXN'}}
                    </div>
                    <div class="flex lg:ml-3 lg:flex-col">
                        <mat-icon class="text-red-500 icon-size-5"
                            svgIcon="heroicons_mini:arrow-trending-down"></mat-icon>
                        <div
                            class="text-secondary ml-1 flex items-center whitespace-nowrap text-md leading-none lg:ml-0 lg:mt-0.5">
                            <span class="font-medium text-red-500">2%</span>
                            <span class="ml-1">below target</span>
                        </div>

                    </div>
                </div>

                <!-- <div class="flex h-20 flex-auto flex-col">
                    <apx-chart class="h-full w-full flex-auto" [chart]="chartConversions.chart"
                        [colors]="chartConversions.colors" [series]="chartConversions.series"
                        [stroke]="chartConversions.stroke" [tooltip]="chartConversions.tooltip"
                        [xaxis]="chartConversions.xaxis" [yaxis]="chartConversions.yaxis"></apx-chart>
                </div> -->
            </div>

            <!-- Rendimiento del mes actual -->
            <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl shadow">
                <div class="m-6 mb-0 flex items-start justify-between">
                    <div class="truncate text-lg font-medium leading-6 tracking-tight">
                        Rendimiento del mes actual
                    </div>
                    <div class="ml-2">
                        <button class="bg-hover h-6 min-h-6 rounded-full px-2" mat-button
                            [matMenuTriggerFor]="impressionsMenu">
                            <span class="text-secondary text-sm font-medium">30 días</span>
                        </button>
                        <mat-menu #impressionsMenu="matMenu">
                            <button mat-menu-item>30 días</button>
                            <button mat-menu-item>3 meses</button>
                            <button mat-menu-item>9 meses</button>
                        </mat-menu>
                    </div>
                </div>

                <div class="mx-6 mt-3 flex flex-col lg:flex-row lg:items-center">
                    <div class="text-7xl font-bold leading-tight tracking-tighter">
                        {{ dataDashboard?.kpis?.monthlyRate | percent:'1.2-2'}}
                    </div>
                    <div class="flex lg:ml-3 lg:flex-col">
                        <mat-icon class="text-red-500 icon-size-5"
                            svgIcon="heroicons_mini:arrow-trending-down"></mat-icon>
                        <div
                            class="text-secondary ml-1 flex items-center whitespace-nowrap text-md leading-none lg:ml-0 lg:mt-0.5">
                            <span class="font-medium text-red-500">4%</span>
                            <span class="ml-1">below target</span>
                        </div>
                    </div>
                </div>

                <!-- <div class="flex h-20 flex-auto flex-col">
                    <apx-chart class="h-full w-full flex-auto" [chart]="chartVisits.chart" [colors]="chartVisits.colors"
                        [series]="chartVisits.series" [stroke]="chartVisits.stroke" [tooltip]="chartVisits.tooltip"
                        [xaxis]="chartVisits.xaxis" [yaxis]="chartVisits.yaxis"></apx-chart>
                </div> -->
            </div>

            <!-- Rendimiento total % -->
            <div class="bg-card flex flex-auto flex-col overflow-hidden rounded-2xl shadow">
                <div class="m-6 mb-0 flex items-start justify-between">
                    <div class="truncate text-lg font-medium leading-6 tracking-tight">
                        Rendimiento total %
                    </div>
                    <div class="ml-2">
                        <button class="bg-hover h-6 min-h-6 rounded-full px-2" mat-button
                            [matMenuTriggerFor]="impressionsMenu">
                            <span class="text-secondary text-sm font-medium">30 días</span>
                        </button>
                        <mat-menu #impressionsMenu="matMenu">
                            <button mat-menu-item>30 días</button>
                            <button mat-menu-item>3 meses</button>
                            <button mat-menu-item>9 meses</button>
                        </mat-menu>
                    </div>
                </div>

                <div class="mx-6 mt-3 flex flex-col lg:flex-row lg:items-center">
                    <div class="text-7xl font-bold leading-tight tracking-tighter">
                        {{ dataDashboard?.kpis?.sinceStartReturnPct | percent:'1.2-2'}}
                    </div>
                    <div class="flex lg:ml-3 lg:flex-col">
                        <mat-icon class="text-red-500 icon-size-5"
                            svgIcon="heroicons_mini:arrow-trending-down"></mat-icon>
                        <div
                            class="text-secondary ml-1 flex items-center whitespace-nowrap text-md leading-none lg:ml-0 lg:mt-0.5">
                            <span class="font-medium text-red-500">4%</span>
                            <span class="ml-1">below target</span>
                        </div>
                    </div>
                </div>

                <!-- <div class="flex h-20 flex-auto flex-col">
                    <apx-chart class="h-full w-full flex-auto" [chart]="chartImpressions.chart"
                        [colors]="chartImpressions.colors" [series]="chartImpressions.series"
                        [stroke]="chartImpressions.stroke" [tooltip]="chartImpressions.tooltip"
                        [xaxis]="chartImpressions.xaxis" [yaxis]="chartImpressions.yaxis"></apx-chart>
                </div> -->
            </div>

            <!-- Visitors overview -->
            <!-- <div
                class="bg-card dark flex flex-auto flex-col overflow-hidden rounded-2xl shadow sm:col-span-2 lg:col-span-3">
                <div class="ml-10 mr-6 mt-10 flex items-center justify-between sm:mr-10">
                    <div class="flex flex-col">
                        <div class="mr-4 text-2xl font-semibold leading-7 tracking-tight md:text-3xl">
                            Visitors Overview
                        </div>
                        <div class="text-secondary font-medium">
                            Number of unique visitors
                        </div>
                    </div>

                    <div class="ml-2">
                        <mat-button-toggle-group class="hidden space-x-1 border-none sm:inline-flex" value="this-year"
                            #visitorsYearSelector="matButtonToggleGroup">
                            <mat-button-toggle class="overflow-hidden rounded-full border-none px-1.5 font-medium"
                                value="last-year">
                                Last Year
                            </mat-button-toggle>
                            <mat-button-toggle class="overflow-hidden rounded-full border-none px-1.5 font-medium"
                                value="this-year">
                                This Year
                            </mat-button-toggle>
                        </mat-button-toggle-group>

                        <div class="sm:hidden">
                            <button mat-icon-button [matMenuTriggerFor]="visitorsMenu">
                                <mat-icon svgIcon="heroicons_outline:ellipsis-vertical"></mat-icon>
                            </button>
                            <mat-menu #visitorsMenu="matMenu">
                                <button mat-menu-item>This Year</button>
                                <button mat-menu-item>Last Year</button>
                            </mat-menu>
                        </div>
                    </div>
                </div>

                <div class="flex h-80 flex-auto flex-col">
                    <apx-chart class="h-full w-full flex-auto" [chart]="chartVisitors.chart"
                        [colors]="chartVisitors.colors" [dataLabels]="chartVisitors.dataLabels"
                        [fill]="chartVisitors.fill" [grid]="chartVisitors.grid"
                        [series]="chartVisitors.series[visitorsYearSelector.value]" [stroke]="chartVisitors.stroke"
                        [tooltip]="chartVisitors.tooltip" [xaxis]="chartVisitors.xaxis"
                        [yaxis]="chartVisitors.yaxis"></apx-chart>
                </div>
            </div> -->
        </div>
    </div>
</div>
}
}